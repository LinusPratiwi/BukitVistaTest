{"ast":null,"code":"import _slicedToArray from \"E:\\\\THINGS_I_CONCERN\\\\WORK\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\THINGS_I_CONCERN\\\\WORK\\\\isomorphic\\\\src\\\\containers\\\\App\\\\Form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"./ArrivalModal\";\n\nfunction Form(_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      arrivalTime = _useState2[0],\n      setArrivalTime = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      bookingCode = _useState4[0],\n      setBookingCode = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      bookings = _useState6[0],\n      setBookings = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      modalOpen = _useState8[0],\n      setModalOpen = _useState8[1]; // useEffect(()=>{\n  //     get\n  // },[bookings])\n\n\n  function makeid(length) {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  }\n\n  function getGuests() {\n    fetch(\"https://bv-online-assessment.herokuapp.com/api/bookings/\").then(function (result) {\n      result.json().then(function (resp) {\n        // console.warn(resp)\n        setBookings(resp);\n      });\n    });\n  }\n\n  function updateArrival() {\n    var arrival_time = {\n      arrivalTime: arrivalTime\n    };\n    fetch(\"https://bv-online-assessment.herokuapp.com/api/bookings/\".concat(bookingCode), {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(arrival_time)\n    }).then(function (result) {\n      result.json().then(function (response) {\n        getGuests();\n      });\n    });\n  }\n\n  function handleChange(event) {\n    var bookingcode = event.target.value;\n    var targetbooking = data.filter(function (value) {\n      return value.booking_code.includes(bookingcode);\n    });\n    setBookings(targetbooking);\n    setBookingCode(targetbooking.booking_code);\n    setArrivalTime(targetbooking.arrival_time);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Your booking code\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: makeid(10),\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), bookings.map(function (booking) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: booking.profile_picture,\n      alt: \"img_guest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Hi, \", booking.guest_name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Thank you for booking with Bukit Vista. Here are the details of your current booking:\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Property name : \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, booking.property_name)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Check in date : \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, booking.check_in_date), \" \\u2003 Check out date : \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, booking.check_out_date)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Arrival time : \", React.createElement(\"button\", {\n      href: \"#\",\n      onClick: function onClick() {\n        setModalOpen(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, booking.arrival_time === \"\" ? \"=|= Please set your arrival time\" : booking.arrival_time)), modalOpen && React.createElement(Modal, {\n      setOpenModal: setModalOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }));\n  }));\n}\n\nexport default Form;","map":{"version":3,"sources":["E:\\THINGS_I_CONCERN\\WORK\\isomorphic\\src\\containers\\App\\Form.js"],"names":["React","useState","useEffect","Modal","Form","data","arrivalTime","setArrivalTime","bookingCode","setBookingCode","bookings","setBookings","modalOpen","setModalOpen","makeid","length","result","characters","charactersLength","i","charAt","Math","floor","random","getGuests","fetch","then","json","resp","updateArrival","arrival_time","method","headers","body","JSON","stringify","response","handleChange","event","bookingcode","target","value","targetbooking","filter","booking_code","includes","map","booking","profile_picture","guest_name","property_name","check_in_date","check_out_date"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Modal from \"./ArrivalModal\"\r\n\r\nfunction Form({data}){\r\n    const [arrivalTime, setArrivalTime] = useState(\"\");\r\n    const [bookingCode, setBookingCode] = useState(\"\");\r\n    const [bookings,setBookings] = useState([]);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    // useEffect(()=>{\r\n    //     get\r\n    // },[bookings])\r\n\r\n    \r\n\r\n    function makeid(length) {\r\n        var result           = '';\r\n        var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n        var charactersLength = characters.length;\r\n        for ( var i = 0; i < length; i++ ) {\r\n            result += characters.charAt(Math.floor(Math.random() * \r\n            charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function getGuests() {\r\n    fetch(\"https://bv-online-assessment.herokuapp.com/api/bookings/\").then((result) => {\r\n      result.json().then((resp) => {\r\n        // console.warn(resp)\r\n        setBookings(resp)\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n    function updateArrival(){\r\n        const arrival_time = {arrivalTime}\r\n        fetch(`https://bv-online-assessment.herokuapp.com/api/bookings/${bookingCode}`,{\r\n            method:'PUT',\r\n            headers:{\r\n                'Accept':'application/json',\r\n                'Content-Type':'application/json'\r\n            },\r\n            body:JSON.stringify(arrival_time)\r\n        }).then(result => {\r\n            result.json().then(response =>{\r\n                getGuests()\r\n            })\r\n            \r\n        })\r\n    }\r\n\r\n\r\n    function handleChange(event){\r\n       \r\n        const bookingcode = event.target.value;\r\n        const targetbooking = data.filter(value => {\r\n            return value.booking_code.includes(bookingcode)\r\n        })\r\n        setBookings(targetbooking);\r\n        setBookingCode(targetbooking.booking_code);\r\n        setArrivalTime(targetbooking.arrival_time);\r\n        \r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <h3>Your booking code</h3>\r\n            <input type=\"text\" placeholder={makeid(10)}\r\n            onChange={handleChange}\r\n            \r\n            />\r\n            <br/>\r\n            {bookings.map(booking => {\r\n                return <div>\r\n                    <img src={booking.profile_picture} alt=\"img_guest\"/>\r\n                    <p>Hi, {booking.guest_name}</p>\r\n                    <p>Thank you for booking with Bukit Vista. Here are the details of your current booking:</p>\r\n                    <p>Property name : <strong>{booking.property_name}</strong></p>\r\n                    <p>Check in date : <strong>{booking.check_in_date}</strong> &emsp; Check out date : <strong>{booking.check_out_date}</strong></p>\r\n                    <p>Arrival time : <button href='#' onClick={() => {\r\n                        setModalOpen(true);\r\n                    }}>\r\n                    { booking.arrival_time === \"\" ? \"=|= Please set your arrival time\" : booking.arrival_time}</button></p>\r\n                    {modalOpen && <Modal setOpenModal={setModalOpen} />}\r\n                    </div>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Form"]},"metadata":{},"sourceType":"module"}